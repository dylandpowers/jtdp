{"version":3,"sources":["containers/LoginPage/styles.module.css","components/CountdownDisplay/styles.module.css","containers/LetterPage/styles.module.css","components/TextInput/styles.module.css","containers/LetterPage/heart.png","containers/SlideshowPage/styles.module.css","components/Firebase/firebase.js","serviceWorker.js","components/TextInput/index.js","components/JWT/utils.js","containers/LoginPage/index.js","components/CountdownDisplay/index.js","containers/SlideshowPage/index.js","containers/LetterPage/index.js","routes/ProtectedRoute.js","components/Background.jsx","movies/search/useMoviesSearch.jsx","movies/search/MoviesAPI.js","movies/components/modals/AddMovieModal.jsx","movies/ranking/MovieController.js","movies/components/MovieList.jsx","movies/components/modals/RateMovieModal.jsx","movies/components/MoviesPage.jsx","index.js"],"names":["module","exports","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","FirebaseContext","React","createContext","Firebase","signInWithEmail","email","password","callback","auth","signInWithEmailAndPassword","then","success","catch","err","fetchAllImageUrls","storage","ref","listAll","res","Promise","all","prefixes","map","prefix","resolve","reject","prefixRes","items","item","getDownloadURL","urls","name","data","fetchLetter","title","firebase","database","child","once","snapshot","val","text","incrementConfettiCount","childName","user","currentUser","startsWith","transaction","currentNum","uploadDylanImage","image","imageType","imageDirectory","put","getMoviesToWatch","onSuccess","onError","firestore","collection","get","qs","movies","forEach","doc","push","saveMovie","movie","isWatched","movieToSave","_","cloneDeep","id","set","console","error","registerMovieSnapshotListener","fn","onSnapshot","docs","d","rateMovie","rating","ratingKey","update","getMovieRefWithId","newBatch","batch","getCurrentUserFirstName","initializeApp","this","withFirebase","Component","props","Consumer","Boolean","window","location","hostname","match","TextInput","placeholder","onChange","autoFocus","value","width","type","customStyle","className","styles","input","style","isAuthenticated","jwt","verify","localStorage","getItem","LoginPage","state","isLoggedIn","onSubmit","bind","setState","e","preventDefault","history","sign","expiresIn","token","setItem","to","container","form","header","target","marginTop","button","tabIndex","withRouter","CountdownDisplay","smallText","date","renderer","completed","days","hours","minutes","seconds","SlideshowPage","pushConfettiElement","confettiElements","key","confettiNumber","colors","drawShape","context","drawHeart","recycle","onConfettiComplete","removeConfettiElement","shift","imageSet","allImages","updateImageUrlsAndImageMode","x","y","height","beginPath","topCurveHeight","moveTo","bezierCurveTo","stroke","fill","closePath","newImageMode","imageMode","newImageUrls","Object","keys","imageUrls","_shuffleArray","toggleConfetti","uploadImage","event","files","array","i","length","j","Math","floor","random","element","buttonContainer","buttonSelected","role","onClick","mainContentContainer","classNames","paneContainer","duration","transitionDuration","infinite","indicators","gallery","url","index","src","filePickerContainer","fileInput","filePickerButton","click","coupleFileInput","LetterPage","letter","textContainer","split","heart","ProtectedRoute","checkAccess","isUserAuthenticated","hasAccess","isLoaded","component","rest","render","BackgroundContainer","styled","div","Background","children","useMovieSearch","query","useState","setMovies","useEffect","onFailure","axios","response","results","original_title","description","overview","avatarUrl","poster_path","searchMovies","SelectableItem","List","Item","MovieSearch","Input","AddMovieModal","showModal","addMovie","closeModal","searchQuery","setSearchQuery","selectedMovie","setSelectedMovie","visible","onOk","onCancel","dataSource","renderItem","Meta","avatar","shape","size","normalize","newMovie","prev","Number","next","ToWatchList","renderListItem","setShowModal","useContext","PlusCircleOutlined","fontSize","onDragEnd","result","source","destination","sourceIndex","destinationIndex","getMovie","newMovies","sourceMovie","splice","curr","commit","commitReorder","droppableId","provided","__","innerRef","droppableProps","RateWrapper","PaddedRate","Rate","RateMovieModal","setRating","count","ColumnLayout","Column","ColumnTitle","h1","RatingBox","RatingRow","ReactDOM","Provider","exact","path","showRatingModal","setShowRatingModal","currentUserFirstName","unsubscribe","unwatchedMovies","useMemo","unordered","headCandidates","filter","m","Error","ordered","idToMovie","reduce","m1","m2","orderMovies","watchedMovies","onRateClick","draggableId","draggableProps","dragHandleProps","orderedMovies","lastMovie","appendUnwatched","jasmineRating","dylanRating","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6f94b156.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2tJR3\",\"form\":\"styles_form__GwXlb\",\"header\":\"styles_header__1UISp\",\"subheader\":\"styles_subheader__3VhGL\",\"button\":\"styles_button__3y1M6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2MdFG\",\"text\":\"styles_text__iqrqT\",\"smallText\":\"styles_smallText__2nesC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__19NJp\",\"textContainer\":\"styles_textContainer__B6SEM\",\"image\":\"styles_image__Ce49u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"styles_input__2gjR5\"};","module.exports = __webpack_public_path__ + \"static/media/heart.de7e3083.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1dViq\",\"buttonContainer\":\"styles_buttonContainer__2Bt1d\",\"filePickerContainer\":\"styles_filePickerContainer__MtY7Q\",\"filePickerButton\":\"styles_filePickerButton__1V8IK\",\"mainContentContainer\":\"styles_mainContentContainer__24AwM\",\"button\":\"styles_button__1mMk9\",\"buttonSelected\":\"styles_buttonSelected__3xAfS\",\"paneContainer\":\"styles_paneContainer__2orr4\",\"left\":\"styles_left__1X500\",\"center\":\"styles_center__1m3dU\",\"right\":\"styles_right__2Bb0Q\",\"image\":\"styles_image__1cU1t\",\"gallery\":\"styles_gallery__1yrV0\"};","import React from 'react';\nimport firebase from 'firebase';\nimport _ from 'lodash';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\n};\n\nconst DYLAN_PICS_DIRNAME = 'dylan-pics/';\nconst COUPLE_PICS_DIRNAME = 'couple-pics/';\n\nclass Firebase {\n  constructor() {\n    firebase.initializeApp(firebaseConfig);\n    this.auth = firebase.auth();\n    this.storage = firebase.storage();\n    this.firestore = firebase.firestore();\n  }\n\n  /**\n   * @param {string} email\n   * @param {string} password\n   * @param {function} callback\n   */\n  signInWithEmail = (email, password, callback) => {\n    this.auth.signInWithEmailAndPassword(email, password)\n      .then(() => callback({ success: true }))\n      .catch((err) => callback({ success: false, err: err }));\n  };\n\n  /**\n   * @param {function} callback\n   */\n  fetchAllImageUrls = (callback) => {\n    this.storage.ref()\n      .listAll()\n      .then((res) => {\n        Promise.all(res.prefixes.map((prefix) => {\n          return new Promise((resolve, reject) => {\n            prefix.listAll().then((prefixRes) => {\n              Promise.all(prefixRes.items.map((item) => item.getDownloadURL()))\n                .then((urls) => resolve({ name: prefix.name, urls: urls }))\n                .catch((err) => reject(err));\n            }).catch((err) => reject(err));\n          });\n        })).then((data) => callback({ success: true, data: data }))\n        .catch((err) => callback({ success: false, err: err }))\n      }).catch((err) => callback({ success: false, err: err }));\n  }\n\n  /**\n   * @param {string} title title of the letter\n   * @param {function} callback\n   */\n  fetchLetter = (title, callback) => {\n    firebase.database().ref()\n      .child('letters')\n      .once('value', (snapshot) => {\n        if (!snapshot.val()) {\n          callback({ success: false });\n          return;\n        }\n\n        const data = snapshot.val()[title];\n        callback({ success: true, text: data });\n      });\n  }\n\n  incrementConfettiCount = () => {\n    const user = this.auth.currentUser;\n    if (user) {\n      var childName;\n      // this is hacky buuuut whatever\n      if (user.email.startsWith('j')) {\n        childName = 'Jasmine';\n      } else {\n        childName = 'Dylan'\n      }\n      firebase.database()\n        .ref('clicks')\n        .child(childName)\n        .transaction(currentNum => (currentNum || 0) + 1);\n    }\n  };\n\n  /**\n   * @param {object} image\n   * @param {string} imageType should either be 'Dylan' or 'Couple'\n   */\n  uploadDylanImage = (image, imageType) => {\n    const imageDirectory = imageType === 'Dylan' ? DYLAN_PICS_DIRNAME : COUPLE_PICS_DIRNAME;\n    this.storage.ref()\n      .child(imageDirectory + image.name)\n      .put(image);\n  };\n\n  getMoviesToWatch = (onSuccess, onError) => {\n    this.firestore.collection('movies_to_watch').get().then((qs) => {\n      const movies = [];\n      qs.forEach((doc) => movies.push(doc.data()));\n      onSuccess(movies);\n    })\n    .catch((err) => onError(err));\n  };\n\n  saveMovie = (movie, isWatched = false) => {\n    const movieToSave = _.cloneDeep(movie);\n    movieToSave.isWatched = isWatched;\n\n    this.firestore.collection('movies').doc(`${movie.id}`).set(movieToSave)\n      .catch((err) => console.error(err));\n  }\n\n  registerMovieSnapshotListener = (fn) => {\n    return this.firestore.collection('movies').onSnapshot((snapshot) => {\n      fn(snapshot.docs.map((d) => ({\n        id: d.id,\n        ...(d.data())\n      })));\n    });\n  }\n\n  rateMovie = (movie, rating, onSuccess) => {\n    const ratingKey = this.auth.currentUser.email.startsWith('j') ? 'jasmineRating' : 'dylanRating';\n    this.firestore.collection('movies').doc(`${movie.id}`).update({ \n      [ratingKey]: rating,\n      isWatched: true,\n    })\n    .then(onSuccess)\n    .catch((err) => console.error(err));\n  }\n\n  getMovieRefWithId = (id) => {\n    return this.firestore.collection('movies').doc(`${id}`);\n  }\n\n  newBatch = () => {\n    return this.firestore.batch();\n  }\n\n  getCurrentUserFirstName = () => {\n    if (!this.auth.currentUser) {\n      return '';\n    }\n    \n    return this.auth.currentUser.email.startsWith('j') ? 'Jasmine' : 'Dylan';\n  }\n}\n\nexport const FirebaseContext = React.createContext(null);\n\nexport default Firebase;\n\nexport const withFirebase = Component => props => (\n  <FirebaseContext.Consumer>\n    {firebase => <Component {...props} firebase={firebase} />}\n  </FirebaseContext.Consumer>\n);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './styles.module.css';\n\nconst TextInput = ({ placeholder, onChange, autoFocus, value, width, type, customStyle, id }) => {\n  // fontSize defaults to 20px if not included\n  return (\n    <input\n      className={styles.input}\n      style={{\n        width: `calc(${width} - 20px)`,\n        ...customStyle,\n      }}\n      id={id}\n      placeholder={placeholder}\n      onChange={onChange}\n      type={type || 'text'}\n      autoFocus={autoFocus ? 'autofocus' : ''}\n      value={value}\n    />\n  );\n};\n\nTextInput.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  autoFocus: PropTypes.bool,\n  value: PropTypes.any,\n  width: PropTypes.string,\n  type: PropTypes.string,\n  customStyle: PropTypes.object,\n  id: PropTypes.string,\n};\n\nexport default TextInput;\n","import jwt from 'jsonwebtoken';\n\nconst TOKEN_NAME = 'jwt-token';\n\nexport const isAuthenticated = () => {\n  try {\n    let _ = jwt.verify(localStorage.getItem(TOKEN_NAME), process.env.REACT_APP_JWT_SECRET);\n    return true;\n  } catch (err) {\n    return false;\n  }\n};\n\nexport const signToken = (email, callback) => {\n  jwt.sign({ user: email }, process.env.REACT_APP_JWT_SECRET, { expiresIn: 60 * 60 * 24 * 30 }, (error, token) => {\n    if (error) {\n      callback(error);\n    } else {\n      localStorage.setItem(TOKEN_NAME, token);\n      callback();\n    }\n  });\n};","import React from 'react';\nimport { withRouter, Redirect } from 'react-router-dom';\n\nimport styles from './styles.module.css';\nimport { withFirebase } from '../../components/Firebase/firebase';\nimport TextInput from '../../components/TextInput';\nimport { isAuthenticated, signToken } from '../../components/JWT/utils';\n\nconst TOKEN_NAME = 'jwt-token';\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: '',\n      password: '',\n      isLoggedIn: false\n    };\n\n    this.firebase = props.firebase;\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ isLoggedIn: isAuthenticated() });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    this.firebase.signInWithEmail(this.state.email, this.state.password, (res) => {\n      if (!res.success) {\n        console.error(res.err);\n      } else {\n        signToken(this.state.email, (err) => {\n          if (err) {\n            console.error(err);\n          } else {\n            this.props.history.push('/iloveyou');\n          }\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.isLoggedIn) {\n      return <Redirect to=\"/iloveyou\" />\n    }\n\n    return (\n      <div className={styles.container}>\n        <form onSubmit={this.onSubmit} className={styles.form}>\n          <div className={styles.header}>\n            Hi love :)\n          </div>\n          <TextInput\n            value={this.state.email}\n            onChange={(e) => this.setState({ email: e.target.value })}\n            placeholder=\"email\"\n            type=\"text\"\n            width=\"80%\"\n          />\n          <TextInput\n            customStyle={{ marginTop: '15px' }}\n            value={this.state.password}\n            onChange={(e) => this.setState({ password: e.target.value })}\n            placeholder=\"password\"\n            type=\"password\"\n            width=\"80%\"\n          />\n          <input \n            className={styles.button}\n            type=\"submit\"\n            value=\"Login\"\n            tabIndex={0}\n          />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withFirebase(LoginPage));","import React from 'react';\nimport Countdown from 'react-countdown';\n\nimport styles from './styles.module.css';\n\nclass CountdownDisplay extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.props = props;\n  }\n\n  render() {\n    const renderer = (props) => {\n      if (props.completed) {\n        return <div className={styles.text}>We're Together!</div>;\n      }\n\n      return <div className={styles.text}>{props.days}d {props.hours}h {props.minutes}m {props.seconds}s</div>;\n    };\n\n    return (\n      <div className={styles.container}>\n        <u className={styles.smallText}>\n          Countdown to being together\n        </u>\n        <Countdown\n          date=\"2021-02-27T00:30:00+00:00\"\n          renderer={renderer}\n        >\n        </Countdown>\n      </div>\n    );\n  }\n}\n\nexport default CountdownDisplay;","import React from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { Fade } from 'react-slideshow-image';\nimport Countdown from 'react-countdown';\nimport { useWindowSize } from '@react-hook/window-size';\nimport Confetti from 'react-confetti';\nimport classNames from 'classnames';\n\nimport styles from './styles.module.css';\nimport { withFirebase } from '../../components/Firebase/firebase';\nimport CountdownDisplay from '../../components/CountdownDisplay';\n\nconst DYLAN_IMAGE_MODE = 'dylan-pics';\nconst COUPLE_IMAGE_MODE = 'couple-pics';\nconst ALL_IMAGE_MODE = 'all';\n\nclass SlideshowPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      imageMode: '',\n      imageUrls: [],\n      confettiNumber: 1,\n      confettiElements: []\n    };\n\n    this.allImages = {};\n\n    this.firebase = props.firebase;\n    \n    this.fetchAllImageUrls = this.fetchAllImageUrls.bind(this);\n    this.updateImageUrlsAndImageMode = this.updateImageUrlsAndImageMode.bind(this);\n    this.toggleConfetti = this.toggleConfetti.bind(this);\n    this.uploadImage = this.uploadImage.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchAllImageUrls();\n    this.pushConfettiElement();\n  }\n\n  pushConfettiElement = () => {\n    this.setState({\n      confettiElements: [\n        ...this.state.confettiElements,\n        <Confetti \n          key={this.state.confettiNumber}\n          colors={[\"#ff00ff\", \"#ff0000\", \"#ffb6c1\", \"#f774b4\"]}\n          drawShape={context => this.drawHeart(context, 0, 0, 15, 15)} \n          recycle={false}\n          onConfettiComplete={this.removeConfettiElement}\n        />\n      ],\n      confettiNumber: this.state.confettiNumber + 1\n    });\n  }\n\n  removeConfettiElement = () => {\n    const confettiElements = this.state.confettiElements;\n    confettiElements.shift();\n    this.setState({ confettiElements });\n  }\n\n  fetchAllImageUrls = (callback) => {\n    this.firebase.fetchAllImageUrls(res => {\n      if (res.success) {\n        res.data.forEach((imageSet) => {\n          this.allImages[imageSet.name] = imageSet.urls;\n        });\n        this.updateImageUrlsAndImageMode(COUPLE_IMAGE_MODE);\n      } else {\n        console.error(res.err);\n      }\n    });\n  };\n\n  drawHeart = (context, x, y, width, height) => {\n    context.beginPath();\n    var topCurveHeight = height * 0.3;\n    context.moveTo(x, y + topCurveHeight);\n    // top left curve\n    context.bezierCurveTo(\n      x, y, \n      x - width / 2, y, \n      x - width / 2, y + topCurveHeight\n    );\n              \n    // bottom left curve\n    context.bezierCurveTo(\n      x - width / 2, y + (height + topCurveHeight) / 2, \n      x, y + (height + topCurveHeight) / 2, \n      x, y + height\n      );\n              \n    // bottom right curve\n    context.bezierCurveTo(\n      x, y + (height + topCurveHeight) / 2, \n      x + width / 2, y + (height + topCurveHeight) / 2, \n      x + width / 2, y + topCurveHeight\n    );\n              \n    // top right curve\n    context.bezierCurveTo(\n      x + width / 2, y, \n      x, y, \n      x, y + topCurveHeight\n    );\n\n    context.stroke();\n    context.fill();\n    context.closePath();\n  };\n\n  updateImageUrlsAndImageMode = (newImageMode) => {\n    let oldImageMode = this.state.imageMode;\n    if (oldImageMode === newImageMode) {\n      return;\n    }\n\n    var newImageUrls = [];\n    if (newImageMode === ALL_IMAGE_MODE) {\n      Object.keys(this.allImages).forEach((key) => newImageUrls.push(...this.allImages[key]));\n    } else {\n      newImageUrls.push(...this.allImages[newImageMode]);\n    }\n    this.setState({\n      imageMode: newImageMode,\n      imageUrls: this._shuffleArray(newImageUrls)\n    });\n  };\n\n  toggleConfetti = () => {\n    this.firebase.incrementConfettiCount();\n    this.pushConfettiElement();\n  };\n\n  uploadImage = (event, imageType) => {\n    this.firebase.uploadDylanImage(event.target.files[0], imageType);\n  };\n\n  _shuffleArray = (array) => {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n  };\n\n  render() {\n\n    const fadeProperties = {\n      duration: 5000,\n      transitionDuration: 500,\n      infinite: true,\n      indicators: false,\n    }\n\n    return (\n      <div className={styles.container}>\n        {this.state.confettiElements.map(element => element) /* idk why you have to do this */ }\n        <div className={styles.buttonContainer}>\n          <div \n            className={this.state.imageMode === COUPLE_IMAGE_MODE ? styles.buttonSelected : styles.button}\n            role=\"button\"\n            onClick={(e) => this.updateImageUrlsAndImageMode(COUPLE_IMAGE_MODE)}\n          >\n            Couple\n          </div>\n          <div\n            className={this.state.imageMode === ALL_IMAGE_MODE ? styles.buttonSelected : styles.button}\n            role=\"button\"\n            onClick={(e) => this.updateImageUrlsAndImageMode(ALL_IMAGE_MODE)}\n          >\n            Both\n          </div>\n          <div \n            className={this.state.imageMode === DYLAN_IMAGE_MODE ? styles.buttonSelected : styles.button}\n            role=\"button\"\n            onClick={(e) => this.updateImageUrlsAndImageMode(DYLAN_IMAGE_MODE)}\n          >\n            Dylan\n          </div>\n        </div>\n        <div className={styles.mainContentContainer}>\n          <div className={classNames(styles.paneContainer, 'left')}>\n            <CountdownDisplay />\n          </div>\n          <Fade {...fadeProperties} className={styles.gallery}>\n            {\n              this.state.imageUrls.map((url, index) => <img key={index} src={url} className={styles.image} />)\n            }\n          </Fade>\n          <div className={classNames(styles.paneContainer, 'right')}>\n            <div\n              className={styles.button}\n              role=\"button\"\n              onClick={(e) => this.toggleConfetti()}\n            >\n              I love you!\n            </div>\n          </div>\n        </div>\n        <div className={styles.filePickerContainer}>\n          <input \n            type=\"file\"\n            onChange={(e) => this.uploadImage(e, 'Dylan')}\n            style={{ 'display': 'none' }}\n            ref={fileInput => this.fileInput = fileInput}\n          />\n          <button className={styles.filePickerButton} onClick={() => this.fileInput.click()}>\n            Upload Dylan Image\n          </button>\n          <input\n            type=\"file\"\n            onChange={(e) => this.uploadImage(e, 'Couple')}\n            style={{ 'display': 'none' }}\n            ref={coupleFileInput => this.coupleFileInput = coupleFileInput}\n          />\n          <button className={styles.filePickerButton} onClick={() => this.coupleFileInput.click()}>\n            Upload Couple Image\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withFirebase(SlideshowPage));\n\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom'; \n\nimport { withFirebase } from '../../components/Firebase/firebase';\nimport styles from './styles.module.css';\nimport heart from './heart.png';\n\nclass LetterPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.firebase = props.firebase;\n\n    this.state = {\n      letter: ''\n    };\n  }\n\n  componentDidMount() {\n    this.firebase.fetchLetter('six-month', (res) => {\n      if (!res.success) {\n        console.error('Error retrieving data');\n      } else {\n        this.setState({ letter: res.text });\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className={styles.container}>\n        <div className={styles.textContainer}>\n          {this.state.letter.split('\\\\n').map(text => <p>{text}</p>)}\n        </div>\n        <div className={styles.image}>\n          <img src={heart} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withFirebase(withRouter(LetterPage));","import React from 'react';\nimport { isAuthenticated } from '../components/JWT/utils';\nimport { Route, Redirect, withRouter } from 'react-router-dom';\n\nclass ProtectedRoute extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasAccess: false,\n      isLoaded: false\n    };\n\n    this.checkAccess = this.checkAccess.bind(this);\n  }\n\n  componentDidMount() {\n    this.checkAccess();\n  }\n\n  checkAccess = () => {\n    const isUserAuthenticated = isAuthenticated();\n    this.setState({\n      hasAccess: isUserAuthenticated,\n      isLoaded: true\n    });\n  };\n\n  render() {\n    if (!this.state.isLoaded) {\n      return null;\n    }\n\n    const { component: Component, ...rest } = this.props;\n\n    return (\n      <Route\n        {...rest}\n        render={(props) => {\n          return this.state.hasAccess ? (\n            <Component {...props} />\n          ) : (\n            <Redirect to=\"/\" />\n          );\n        }}\n      />\n    );\n  }\n}\n\nexport default withRouter(ProtectedRoute);","/**\n * @fileoverview A common background for a page.\n */\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst BackgroundContainer = styled.div`\n  background-color: #ccccff;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\nexport default function Background({ children }) {\n  return (\n    <BackgroundContainer>\n      {children}\n    </BackgroundContainer>\n  );\n}\n","/**\n * @fileoverview A custom hook to search for movies.\n */\nimport { useState, useEffect } from 'react';\nimport { searchMovies } from './MoviesAPI';\n\nexport default function useMovieSearch(query) {\n  const [movies, setMovies] = useState([]);\n\n  useEffect(() => {\n    if (query === '') {\n      setMovies([]);\n      return;\n    }\n\n    const onFailure = () => {\n      console.error('There was an issue fetching movies.');\n    };\n\n    searchMovies(query, setMovies, onFailure);\n  }, [query]);\n\n  return {\n    movies\n  };\n}","/**\n * @fileoverview A service to contact the movies API.\n */\nimport axios from 'axios';\n\nconst API_URL = 'https://api.themoviedb.org/3/search/movie';\nconst IMAGE_URL = 'https://image.tmdb.org/t/p/w92';\n\n/**\n * Search movies based on the given query. \n * \n * @param {string} query\n * @param {function} onSuccess\n * @param {function} onFailure\n */\nexport function searchMovies(query, onSuccess, onFailure) {\n  const url = `${API_URL}?query=${query}&api_key=92e2dd5d5c15b8e895ccbb731bb8a7ab`;\n\n  axios.get(url)\n    .then((response) => {\n      const movies = response.data.results.map((movie) => ({\n        title: movie.original_title,\n        description: movie.overview,\n        avatarUrl: `${IMAGE_URL}/${movie.poster_path}`,\n        id: movie.id,\n      }));\n      onSuccess(movies);\n    })\n    .catch((err) => {\n      onFailure();\n    })\n}","/**\n * @fileoverview a component to add a new movie to the database.\n */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, Input, List, Avatar } from 'antd';\nimport useMovieSearch from '../../search/useMoviesSearch';\nimport styled from 'styled-components';\nimport classNames from 'classnames';\n\nconst SelectableItem = styled(List.Item)`\n  border-radius: 8px;\n\n  &:hover {\n    background-color: #ccccff80;\n    cursor: pointer;\n  }\n\n  &.selected {\n    background-color: #ccccff;\n  }\n`;\n\nconst MovieSearch = styled(Input)`\n  margin-bottom: 10px;\n`;\n\nexport default function AddMovieModal(props) {\n  const { showModal, addMovie, closeModal } = props;\n  const [searchQuery, setSearchQuery] = useState('');\n  const { movies } = useMovieSearch(searchQuery);\n  const [selectedMovie, setSelectedMovie] = React.useState({});\n\n  function getItemClassnames(id) {\n    return classNames({\n      'selected': id === selectedMovie.id\n    });\n  }\n\n  function onOk() {\n    addMovie(selectedMovie);\n    closeModal();\n  }\n\n  return (\n    <Modal\n      title=\"Add Movie\"\n      visible={showModal}\n      onOk={onOk}\n      onCancel={closeModal}\n    >\n      <MovieSearch\n        placeholder=\"Search Movies\"\n        onChange={(e) => setSearchQuery(e.target.value)}\n      />\n      <List\n        dataSource={movies}\n        renderItem={(item) => (\n          <SelectableItem \n            key={item.id}\n            onClick={() => setSelectedMovie(item)}\n            className={getItemClassnames(item.id)}\n          >\n            <List.Item.Meta\n              avatar={\n                <Avatar shape=\"square\" size=\"large\" src={item.avatarUrl} />\n              }\n              title={item.title}\n              description={item.description}\n            />\n          </SelectableItem>\n        )}\n      />\n    </Modal>\n  );\n}\n\nAddMovieModal.propTypes = {\n  showModal: PropTypes.bool.isRequired,\n  addMovie: PropTypes.func.isRequired,\n  closeModal: PropTypes.func.isRequired\n};","/**\n * @fileoverview A controller for actions related to movies.\n * @author Dylan Powers\n */\nimport _ from 'lodash';\n\n/**\n * Given an array of undordered movies, orders the movies by ranking. \n *\n * @param {!Array<!Object>} unordered \n * @return {!Array<!Object>}\n */\nexport function orderMovies(unordered) {\n  if (!unordered.length) {\n    return [];\n  }\n\n  // First find the head\n  const headCandidates = unordered.filter((m) => !m.prev);\n  if (!headCandidates.length || headCandidates.length > 1) {\n    throw new Error('Invalid list format.');\n  }\n\n  const ordered = [{ ...headCandidates[0], index: 0 }];\n  const idToMovie = unordered.reduce((m1, m2) => ({ ...m1, [m2.id]: m2 }), {});\n\n  let curr = ordered[0];\n  while (curr.next) {\n    ordered.push({ ...idToMovie[curr.next], index: ordered.length });\n    curr = idToMovie[curr.next];\n  }\n\n  return ordered;\n}\n\n/**\n * Commits the reordering by inserting the movie at sourceIndex into destinationIndex.\n * \n * @param {!Array<!Object>} movies \n * @param {number} sourceIndex \n * @param {number} destinationIndex \n * @param {function(number):!Object} getMovie \n * @param {!Object} batch \n */\nexport function commitReorder(movies, sourceIndex, destinationIndex, getMovie, batch) {\n  if (sourceIndex === destinationIndex) {\n    return;\n  }\n\n  const newMovies = _.cloneDeep(movies);\n  const sourceMovie = newMovies[sourceIndex];\n\n  newMovies.splice(sourceIndex, 1);\n  newMovies.splice(destinationIndex, 0, sourceMovie);\n\n  let curr = newMovies[0];\n  delete curr.prev;\n  \n  for (let i = 1; i < newMovies.length; i++) {\n    newMovies[i].prev = curr.id;\n    if (i === newMovies.length - 1) {\n      delete newMovies[i].next;\n    }\n    curr.next = newMovies[i].id;\n    curr = newMovies[i];\n  }\n\n  newMovies.forEach((movie) => {\n    batch.set(getMovie(movie.id), normalize(movie));\n  });\n  \n  batch.commit();\n}\n\n/**\n * Appends an unwatched movie to the end of the list.\n * \n * @param {!Array<!Object>} orderedMovies the ordered list of movies\n * @param {!Object} newMovie the new movie to add\n * @param {function(number):!Object} getMovie \n * @param {!Object} batch\n */\nexport function appendUnwatched(orderedMovies, newMovie, getMovie, batch) {\n  if (!orderedMovies.length) {\n    batch.set(getMovie(newMovie.id), normalize(newMovie));\n    batch.commit();\n    return;\n  }\n\n  const lastMovie = _.cloneDeep(orderedMovies[orderedMovies.length - 1]);\n  lastMovie.next = newMovie.id;\n  newMovie.prev = lastMovie.id;\n\n  batch.set(getMovie(lastMovie.id), normalize(lastMovie));\n  batch.set(getMovie(newMovie.id), normalize(newMovie));\n\n  batch.commit();\n}\n\n/**\n * Normalizes the given movie by removing null values and setting the prev and next pointers to\n * numbers.\n *\n * @param {!Object} movie \n * @return {!Object} the normalized movie\n */\nfunction normalize(movie) {\n  const newMovie = _.cloneDeep(movie);\n  delete newMovie.id;\n  delete newMovie.index;\n\n  if (newMovie.prev) {\n    newMovie.prev = Number(newMovie.prev);\n  }\n  if (newMovie.next) {\n    newMovie.next = Number(newMovie.next);\n  }\n\n  return newMovie;\n}","/**\n * @fileoverview Component for rendering a movie list.\n */\nimport React, { useState, useContext } from 'react';\nimport { List } from 'antd';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport AddMovieModal from './modals/AddMovieModal';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport { FirebaseContext } from '../../components/Firebase/firebase';\nimport { commitReorder } from '../ranking/MovieController';\nexport default function ToWatchList(props) {\n  const { renderListItem, movies, saveMovie } = props;\n  const [showModal, setShowModal] = useState(false);\n  const firebase = useContext(FirebaseContext);\n\n  function onDragEnd(result) {\n    if (!result.source || !result.destination) {\n      return;\n    }\n\n    commitReorder(\n      movies, \n      result.source.index, \n      result.destination.index, \n      firebase.getMovieRefWithId,\n      firebase.newBatch()\n    );\n  }\n\n  return (\n    <>\n      <PlusCircleOutlined \n        role=\"button\"\n        tabIndex={0}\n        onClick={() => setShowModal(true)}\n        style={{ fontSize: '24px' }}\n      />\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable droppableId=\"to-watch-movies\">\n          {(provided, __) => (\n            <div ref={provided.innerRef} {...provided.droppableProps}>\n              <List\n                dataSource={movies}\n                renderItem={renderListItem}\n              />\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n      <AddMovieModal\n        showModal={showModal}\n        addMovie={saveMovie}\n        closeModal={() => setShowModal(false)}\n      />\n    </>\n  );\n}","/**\n * @fileoverview A modal to rate a given movie.\n */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, Rate } from 'antd';\nimport styled from 'styled-components';\n\nconst RateWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst PaddedRate = styled(Rate)`\n  margin-bottom: 10px;\n`;\n\nexport default function RateMovieModal(props) {\n  const { showModal, closeModal, rateMovie, movie } = props;\n  const [rating, setRating] = useState(1);\n\n  return (\n    <Modal\n      title={`Rate ${movie.title}`}\n      visible={showModal}\n      onCancel={closeModal}\n      onOk={() => rateMovie(rating)}\n    >\n      <RateWrapper>\n        <PaddedRate\n          count={10}\n          value={rating}\n          onChange={setRating}\n        />\n        Note: this will also move the movie to the \"watched\" column.\n      </RateWrapper>\n    </Modal>\n  );\n}\n\nRateMovieModal.propTypes = {\n  showModal: PropTypes.bool.isRequired,\n  closeModal: PropTypes.func.isRequired,\n  rateMovie: PropTypes.func.isRequired,\n  movie: PropTypes.object.isRequired,\n}","/**\n * @fileoverview Component to render a movies page with future recommendations and ratings.\n */\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport { List, Avatar, Button } from 'antd';\nimport styled from 'styled-components';\n\nimport { FirebaseContext } from '../../components/Firebase/firebase';\nimport Background from '../../components/Background';\nimport MovieList from './MovieList';\nimport RateMovieModal from './modals/RateMovieModal';\nimport { orderMovies, appendUnwatched } from '../ranking/MovieController';\nimport { Draggable } from 'react-beautiful-dnd';\n\nconst ColumnLayout = styled.div`\n  display: flex;\n`;\n\nconst Column = styled.div`\n  padding: 20px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ColumnTitle = styled.h1`\n  align-self: center;\n  color: white;\n  text-decoration: underline;\n`;\n\nconst RatingBox = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 170px;\n`;\n\nconst RatingRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport default function MoviesPage(props) {\n  const [movies, setMovies] = useState([]);\n  const [showRatingModal, setShowRatingModal] = useState(false);\n  const [selectedMovie, setSelectedMovie] = useState({});\n  const firebase = useContext(FirebaseContext);\n\n  const currentUserFirstName = firebase.getCurrentUserFirstName();\n\n  useEffect(() => {\n    const unsubscribe = firebase.registerMovieSnapshotListener(setMovies);\n    return () => unsubscribe();\n  }, []);\n\n  const unwatchedMovies = useMemo(() => {\n    return orderMovies(movies.filter((m) => !m.isWatched));\n  }, [movies]);\n\n  const watchedMovies = useMemo(() => {\n    return movies.filter((m) => m.isWatched);\n  }, [movies]);\n\n  function onRateClick(movie) {\n    setSelectedMovie(movie);\n    setShowRatingModal(true);\n  }\n\n  function renderToWatchListItem(item) {\n    return (\n      <Draggable key={item.id} draggableId={item.id} index={item.index}>\n        {(provided, __) => (\n          <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n            <List.Item>\n              <List.Item.Meta\n                avatar={\n                  <Avatar shape=\"square\" size=\"large\" src={item.avatarUrl} />\n                }\n                title={`${item.index + 1}. ${item.title}`}\n                description={item.description}\n              />\n              <Button onClick={() => onRateClick(item)}>Rate</Button>\n            </List.Item>\n          </div>\n        )}\n      </Draggable>\n    );\n  }\n\n  function renderWatchedListItem(item) {\n    return (\n      <List.Item key={item.title}>\n        <List.Item.Meta\n          avatar={\n            <Avatar shape=\"square\" size=\"large\" src={item.avatarUrl} />\n          }\n          title={item.title}\n          description={item.description}\n        />\n        <RatingBox>\n          <RatingRow>\n            <p>Jasmine Rating:</p>\n            {item.jasmineRating ? (\n              <b>{item.jasmineRating}</b>\n            ) : (\n              <>\n                {currentUserFirstName === 'Jasmine' ? (\n                  <Button onClick={() => onRateClick(item)}>Rate</Button>\n                ) : (\n                  <p>Pending</p>\n                )}\n              </>\n            )}\n          </RatingRow>\n          <RatingRow>\n            <p>Dylan Rating:</p>\n            {item.dylanRating ? (\n              <b>{item.dylanRating}</b>\n            ) : (\n              <>\n                {currentUserFirstName === 'Dylan' ? (\n                  <Button onClick={() => onRateClick(item)}>Rate</Button>\n                ) : (\n                  <p>Pending</p>\n                )}\n              </>\n            )}\n          </RatingRow>\n        </RatingBox>\n      </List.Item>\n    );\n  }\n\n  function renderRateMovieModal() {\n    return (\n      <RateMovieModal\n        showModal={showRatingModal}\n        closeModal={() => setShowRatingModal(false)}\n        rateMovie={(rating) => \n          firebase.rateMovie(selectedMovie, rating, () => setShowRatingModal(false))}\n        movie={selectedMovie}\n      />\n    );\n  }\n\n  return (\n    <Background>\n      <ColumnLayout>\n        <Column>\n          <ColumnTitle>To Watch</ColumnTitle>\n          <MovieList \n            movies={unwatchedMovies} \n            renderListItem={renderToWatchListItem}\n            saveMovie={(movie) => appendUnwatched(\n              unwatchedMovies, movie, firebase.getMovieRefWithId, firebase.newBatch())}\n          />\n        </Column>\n        <Column>\n          <ColumnTitle>Watched</ColumnTitle>\n          <MovieList \n            movies={watchedMovies}\n            renderListItem={renderWatchedListItem}\n            saveMovie={(movie) => firebase.saveMovie(movie, true /* isWatched */)}\n          />\n        </Column>\n      </ColumnLayout>\n      {renderRateMovieModal()}\n    </Background>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter, Switch, Route } from 'react-router-dom';\nimport Firebase, { FirebaseContext } from './components/Firebase/firebase';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nimport LoginPage from './containers/LoginPage';\nimport SlideshowPage from './containers/SlideshowPage';\nimport LetterPage from './containers/LetterPage';\nimport ProtectedRoute from './routes/ProtectedRoute';\nimport MoviesPage from './movies/components/MoviesPage';\n\nReactDOM.render(\n  <FirebaseContext.Provider value={new Firebase()}>\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\" component={LoginPage} />\n        <ProtectedRoute exact path=\"/iloveyou\" component={SlideshowPage} />\n        <ProtectedRoute exact path=\"/sixmonths\" component={LetterPage} />\n        <ProtectedRoute exact path=\"/movies\" component={MoviesPage} />\n        <Route component={LoginPage} />\n      </Switch>\n    </HashRouter>\n  </FirebaseContext.Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}